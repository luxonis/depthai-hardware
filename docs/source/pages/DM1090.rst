.. _dm1090ffc:

OAK-FFC-3P
==========

.. image:: /_static/images/DM1090FFC/DM1090FFC_up.jpg

Overview
********

The OAK-FFC-3P (DM1090FFC) baseboard has three FFC interfaces which allow for two 2-lane MIPI camera modules i.e. :ref:`OAK-FFC-OV9282 <bg0250tg>` (stereo pair) and one 4-lane MIPI
i.e. :ref:`OAK-FFC-IMX378 <bg0249>` (RGB camera module).

Please note that only revision R1M1E1 and newer camera modules can be connected to the OAK-FFC-3P. With OAK-FFC-3P we gained support for 22-pin RPi camera
interface. For that you will need a `FFC from Arducam <https://www.arducam.com/product/arducam-12mp-imx477-mini-high-quality-camera-with-m12-mount-lens-and-adapter-board-for-depthai/>`__,
which converts 26-pin Luxonis camera pinout to 22 pin RPi camera pinout.

Here's a list of :ref:`compatible Arducam cameras <arducam-compatible-cameras>` with the OAK-FFC-3P. Those cameras have a M12 mount, so you can use
different lenses to get **custom FoV** (they have wide and narrow angle M12 lenses).

In addition IMU over SPI support was also added to the OAK-FFC-3P.

Supported FFC camera modules
****************************

.. list-table:: Supported FFC camera modules
   :header-rows: 1

   * - Sensor
     - Color/Mono
     - Resolution
     - FOV
     - MIPI lanes
     - Links
   * - IMX378
     - Color
     - 12 MP
     - 68.8° HFOV, 81° DFOV
     - 2*
     - `Shop <https://shop.luxonis.com/collections/all/products/4k-60-hz-video-modular-color-camera>`__, :ref:`docs <bg0249>`
   * - OV9282
     - Mono
     - 1 MP
     - 71.8° HFOV, 81° DFOV
     - 2
     - `Shop <https://shop.luxonis.com/collections/all/products/oak-ffc-ov9282-pair>`__, :ref:`docs <bg0250tg>`
   * - IMX477
     - Color
     - 12 MP
     - 75° HFOV
     - 2*
     - `Shop <https://shop.luxonis.com/addme>`__
   * - OV9282
     - Mono
     - 1 MP
     - 75° HFOV
     - 2
     - `Shop <https://shop.luxonis.com/addme>`__
   * - OV9782
     - Color
     - 1 MP
     - 75° HFOV
     - 2
     - `Shop <https://shop.luxonis.com/addme>`__

.. note::
  \* Means that the sensor supports 4 MIPI lanes, but only 2 lanes are used

.. list-table:: Proof of concept functionality only
   :header-rows: 1

   * - Sensor
     - Color/Mono
     - Resolution
     - FOV
     - MIPI lanes
     - Links
   * - IMX283
     - Color
     - 20 MP
     - 75° HFOV
     - 4
     - `Shop <https://www.arducam.com/product/arducam-20mp-imx283-camera-module-with-m12-mount-lens-and-adapter-board-for-depthai/>`__


Board Layout and Dimensions
***************************

.. image:: /_static/images/DM1090FFC/DM1090FFC_BOT.jpg

Key features
************

* 2x 2-lane MIPI 26-pin port
* 1x 4-lane MIPI 26-pin port
* 5V power input via barrel jack
* USB 3.1 Gen 1 Type-C
* Interface for Luxnois OAK-SoM
* Pads for OAK-SoM1.8V SPI
* Pads for OAK-SoM 3.3V SDIO
* Pads for OAK-SoM 1.8V Aux Signals (I2C, UART, GPIO)
* 5V Fan OR USB Type-C
* Design files produced with Altium Designer 20

.. image:: /_static/images/DM1090FFC/DM1090FFC_with_cameras.jpg

Getting started
***************

The OAK-FFC-3P is powered via USB Type-C or from a 5V, 5.5m x 2.5mm barrel jack, and interfaces to a host via USB 3.1 Gen1 Type-C. With cameras and the 
:ref:`OAK-SoM <bw1099>`, total power consumption usually stays below the 900ma specification of USB 3, but Type-C power of 1.5A or greater is recommended.

Interfacing with the OAK-SoM is also possible with OAK-FFC-3P connector pads J3, J4, and J5. These pads are designed for the Amphenol/FCI 
20021121-00010T1LF or equivalent. Please refer to the schematics for pinout information.

The reset button resets the OAK-SoM only. The boot button overrides boot mode to USB boot if different boot mode is set in NOR Flash 
and `BW1099EMB <https://github.com/luxonis/depthai-hardware/tree/master/SoMs/BW1099EMB/R1M0E1>`__ SoM is used.

The 5V LED indicates 5V power is present on the OAK-FFC-3P. The PG LED indicates "power good" from the OAK-SoM. The "RUN" LED indicates that the 
OAK-SoM is not in reset.

Revision info
*************

USB designs with FFC camera boards contain 3 different iterations, below is a flowchart which tries to explain the design progress flow:

.. image:: /_static/images/DM1090FFC/Flowchart_FFC.jpg

.. note::
  The first two revisions (**BW1092FFC** and **DM1098FFC**) were also named **F1**, and the newest revision (**DM1090FFC**) is named **F2**.

Datasheets
**********

* `Assembly Drawing <https://github.com/luxonis/depthai-hardware/blob/master/DM1090FFC_DepthAI_USB3/Docs/Assembly%20Drawing%20PDF/Production.PDF>`__
* `Assembly Outputs <https://github.com/luxonis/depthai-hardware/tree/master/DM1090FFC_DepthAI_USB3/Docs/Assembly%20Outputs>`__
* `Fabrication Drawing <https://github.com/luxonis/depthai-hardware/blob/master/DM1090FFC_DepthAI_USB3/Docs/Fabrication%20Drawing%20PDF/Production.PDF>`__
* `Fabrication Outputs <https://github.com/luxonis/depthai-hardware/tree/master/DM1090FFC_DepthAI_USB3/Docs/Fabrication%20Outputs>`__
* `Schematic <https://github.com/luxonis/depthai-hardware/blob/master/DM1090FFC_DepthAI_USB3/Docs/Schematic%20PDF/Production.PDF>`__

Altium Design Files
*******************

See files `here <https://github.com/luxonis/depthai-hardware/tree/master/DM1090FFC_DepthAI_USB3/PCB>`__

3D Models
*********

Download `here <https://github.com/luxonis/depthai-hardware/tree/master/DM1090FFC_DepthAI_USB3/3D_Models>`__


.. include::  /pages/includes/footer-short.rst
